# Magyar √âp√≠t≈ëanyag AI - Frontend Architekt√∫ra Dokument√°ci√≥

## üìã Tartalomjegyz√©k
1. [√Åttekint√©s](#√°ttekint√©s)
2. [Technol√≥giai Stack](#technol√≥giai-stack)
3. [Projekt Strukt√∫ra](#projekt-strukt√∫ra)
4. [Komponens Architekt√∫ra](#komponens-architekt√∫ra)
5. [State Management](#state-management)
6. [API Integr√°ci√≥](#api-integr√°ci√≥)
7. [Design System](#design-system)
8. [F√ºgg≈ës√©gi T√©rk√©pek](#f√ºgg≈ës√©gi-t√©rk√©pek)
9. [Development Guide](#development-guide)

---

## üèóÔ∏è √Åttekint√©s

A Lambda.hu Magyar √âp√≠t≈ëanyag AI frontend egy modern, professzion√°lis React alkalmaz√°s, amely term√©szetes nyelv≈± AI asszisztenst √©s intelligens term√©kkeres√©st biztos√≠t az √©p√≠t≈ëipar sz√°m√°ra.

### F≈ë C√©lok
- **Term√©szetes nyelv≈± interakci√≥**: RAG-alap√∫ AI chat widget
- **Professzion√°lis UI/UX**: √âp√≠t≈ëipari identit√°s modern design nyelvvel
- **Val√≥s adatok**: PostgreSQL + ChromaDB backend integr√°ci√≥
- **Reszponz√≠v design**: Desktop √©s mobil t√°mogat√°s
- **Type Safety**: Teljes TypeScript coverage

---

## üõ†Ô∏è Technol√≥giai Stack

### Core Framework
```yaml
Framework: Next.js 14.2.18
  - App Router (src/app directory)
  - Server Components + Client Components hibrid
  - Built-in optimaliz√°ci√≥k (Image, Font, CSS)
  
React: 18.x
  - Hooks-based functional components
  - Context API state management
  - Strict TypeScript integration
```

### Styling & UI
```yaml
Tailwind CSS 3.4.1:
  - Utility-first CSS framework
  - Custom √©p√≠t≈ëipari color palette
  - Responsive design utilities
  - Custom animations √©s transitions

Typography:
  - Inter font family (Google Fonts)
  - Harmonikus font scale
  - Magyar karakterk√©szlet t√°mogat√°s
```

### Development Tools
```yaml
TypeScript 5.x:
  - Strict type checking
  - Interface-driven development
  - API response type safety

ESLint + Next.js config:
  - Code quality enforcement
  - Accessibility rules (jsx-a11y)
  - React hooks rules
```

---

## üìÅ Projekt Strukt√∫ra

```
src/frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Root layout component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Main application page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css        # Global styles
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/             # Admin panel route
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx       # Admin page component
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/            # Reusable UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx     # Main navigation bar
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx      # Central dashboard component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatWidget.tsx     # RAG AI chat widget
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Providers.tsx      # Context providers wrapper
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AdminPanel/        # Admin-specific components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AdminPanel.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ExtractionAnalysis.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ lib/                   # Utility libraries
‚îÇ       ‚îî‚îÄ‚îÄ api.ts            # Backend API integration layer
‚îÇ
‚îú‚îÄ‚îÄ public/                    # Static assets
‚îú‚îÄ‚îÄ package.json              # Dependencies and scripts
‚îú‚îÄ‚îÄ tailwind.config.js        # Tailwind CSS configuration
‚îú‚îÄ‚îÄ tsconfig.json            # TypeScript configuration
‚îî‚îÄ‚îÄ next.config.js           # Next.js configuration
```

### F√°jl Szervez√©si Elvek

**1. Feature-based grouping**: Kapcsol√≥d√≥ komponensek egy mapp√°ban
**2. Shared utilities**: Common libraries a `lib/` mapp√°ban
**3. Type co-location**: API types az api.ts f√°jlban
**4. Component isolation**: Minden komponens self-contained

---

## üß© Komponens Architekt√∫ra

### 1. App Layout Hierarchy

```
RootLayout (layout.tsx)
‚îú‚îÄ‚îÄ Providers (context wrappers)
‚îÇ   ‚îî‚îÄ‚îÄ QueryClient, Toaster
‚îî‚îÄ‚îÄ Main Application (page.tsx)
    ‚îú‚îÄ‚îÄ Navigation
    ‚îú‚îÄ‚îÄ Content Router
    ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard
    ‚îÇ   ‚îú‚îÄ‚îÄ SearchInterface  
    ‚îÇ   ‚îú‚îÄ‚îÄ ProductCatalog
    ‚îÇ   ‚îú‚îÄ‚îÄ MonitoringDashboard
    ‚îÇ   ‚îî‚îÄ‚îÄ AdminPanel
    ‚îî‚îÄ‚îÄ ChatWidget (floating)
```

### 2. F≈ë Komponensek R√©szletesen

#### **Navigation.tsx**
```typescript
// C√©lja: F≈ë navig√°ci√≥s interf√©sz
// F√ºgg≈ës√©gek: NINCS (pure UI component)
// Props: activeTab, onTabChange
// State: NINCS (stateless)

Funkci√≥k:
- Tab-based navigation (5 f≈ë modul)
- Responsive mobile/desktop layout
- Active state management
- Lambda.hu branding
- System status indicator
```

#### **Dashboard.tsx**
```typescript
// C√©lja: K√∂zponti landing page √©s keres√©si interf√©sz
// F√ºgg≈ës√©gek: api.ts (backend integration)
// Props: onSearchSubmit, onCategorySelect
// State: searchQuery, isSearchFocused, stats

Funkci√≥k:
- Hero section k√∂zponti keres≈ës√°vval
- Dynamic statistics (real backend data)
- Quick access category modules
- Sample query suggestions
- Real-time data loading
```

#### **ChatWidget.tsx**
```typescript
// C√©lja: Lebeg≈ë AI chat asszisztens
// F√ºgg≈ës√©gek: api.ts (RAG search integration)
// Props: onClose
// State: isOpen, isMinimized, messages, inputValue, isTyping

Funkci√≥k:
- Floating chat window (minimizable)
- Real RAG API integration
- Product recommendations dengan
- Natural language processing
- Conversation history
- Quick action buttons
```

#### **api.ts**
```typescript
// C√©lja: Backend API integration layer
// F√ºgg≈ës√©gek: Native fetch API
// Exports: ApiService class, type definitions

Funkci√≥k:
- Type-safe API calls
- Error handling
- Request/response transformation
- Endpoint abstraction (products, search, admin)
```

### 3. Component Communication Patterns

```mermaid
graph TD
    A[page.tsx - Main App] --> B[Navigation]
    A --> C[Dashboard]
    A --> D[ChatWidget]
    
    C --> E[api.ts - Backend]
    D --> E
    
    A --> F[Other Pages]
    F --> G[AdminPanel]
    G --> E
    
    B --> A[Tab Change Events]
    C --> A[Search Events]
    D --> A[Floating Widget]
```

**Communication Flow:**
1. **Downward**: Props drilling for callbacks √©s configuration
2. **Upward**: Event callbacks (onSearchSubmit, onTabChange)
3. **Lateral**: Shared API service k√∂z√∂s backend hozz√°f√©r√©shez

---

## üîÑ State Management

### 1. Local State (useState)

```typescript
// Dashboard component
const [searchQuery, setSearchQuery] = useState('');
const [stats, setStats] = useState<SystemStats>({...});

// ChatWidget component  
const [messages, setMessages] = useState<Message[]>([...]);
const [isTyping, setIsTyping] = useState(false);

// Navigation
const [activeTab, setActiveTab] = useState<NavigationTab>('dashboard');
```

**Reasoning**: Local state egyszer≈± komponens-specifikus adatokhoz

### 2. Prop Drilling

```typescript
// Main App koordin√°lja a tab state-et
function Home() {
  const [activeTab, setActiveTab] = useState<NavigationTab>('dashboard');
  
  return (
    <>
      <Navigation activeTab={activeTab} onTabChange={setActiveTab} />
      <main>{renderContent()}</main>
    </>
  );
}
```

**Reasoning**: Egyszer≈± app strukt√∫ra eset√©n elegend≈ë

### 3. Server State (useEffect + API)

```typescript
useEffect(() => {
  const loadSystemStats = async () => {
    try {
      const [products, manufacturers] = await Promise.all([
        api.getProducts(1000, 0),
        api.getManufacturers(),
      ]);
      setStats({...}); // Update local state
    } catch (error) {
      // Error handling
    }
  };
  loadSystemStats();
}, []);
```

**Reasoning**: Server state useEffect-tel kezelve, j√∂v≈ëbeli React Query integr√°ci√≥val

---

## üîå API Integr√°ci√≥

### 1. API Service Architecture

```typescript
// src/lib/api.ts
export class ApiService {
  private baseUrl: string;
  
  constructor(baseUrl = 'http://localhost:8000') {
    this.baseUrl = baseUrl;
  }
  
  private async request<T>(endpoint: string, options?: RequestInit): Promise<T> {
    // Centralized request handling
    // Error handling
    // Type safety
  }
  
  // Domain-specific methods
  async getProducts(limit = 100, offset = 0): Promise<Product[]>
  async searchRAG(query: string, limit = 10): Promise<SearchResponse>
  async healthCheck(): Promise<{status: string}>
}

// Default instance
export const api = new ApiService();
```

### 2. Type Definitions

```typescript
// Backend schema mapping
export interface Product {
  id: number;
  name: string;
  description?: string;
  technical_specs?: Record<string, any>;
  manufacturer?: Manufacturer;
  category?: Category;
}

export interface SearchResponse {
  query: string;
  total_results: number;
  results: SearchResult[];
}
```

### 3. Integration Points

```yaml
Backend Endpoints:
  GET /products              ‚Üí Dashboard statistics
  GET /manufacturers         ‚Üí Dashboard statistics  
  GET /categories           ‚Üí Dashboard statistics
  POST /search/rag          ‚Üí ChatWidget AI responses
  GET /health               ‚Üí System status
  POST /api/v1/scrape       ‚Üí Admin panel actions
```

### 4. Error Handling Strategy

```typescript
// Centralized error handling in API service
private async request<T>(endpoint: string, options?: RequestInit): Promise<T> {
  try {
    const response = await fetch(url, options);
    if (!response.ok) {
      throw new Error(`API request failed: ${response.statusText}`);
    }
    return response.json();
  } catch (error) {
    // Log error
    // User feedback
    throw error;
  }
}

// Component level error handling
try {
  const searchResponse = await api.searchRAG(query, 5);
  // Success path
} catch (error) {
  // Graceful degradation
  const errorMessage: Message = {
    type: 'ai',
    content: 'Sajn√°lom, jelenleg nem tudok kapcsol√≥dni az adatb√°zishoz.'
  };
}
```

---

## üé® Design System

### 1. Color Palette

```typescript
// tailwind.config.js
colors: {
  // √âp√≠t≈ëipari sz√≠npaletta
  primary: {
    500: '#2E5C8A', // F≈ë k√©k - bizalom √©s szak√©rtelem
    // ... teljes sk√°la
  },
  secondary: {
    500: '#F5A623', // √âp√≠t≈ëipari narancs - energia √©s innov√°ci√≥
    // ... teljes sk√°la
  },
  accent: {
    500: '#4CAF50', // Z√∂ld - fenntarthat√≥s√°g √©s siker
    // ... teljes sk√°la
  },
  neutral: {
    // Vil√°gossz√ºrke √°rnyalatok
  }
}
```

### 2. Typography System

```typescript
fontFamily: {
  sans: ['Inter', 'system-ui', 'sans-serif'], // Magyar karakterk√©szlet
  mono: ['Fira Code', 'monospace'],
}
```

### 3. Spacing & Layout

```typescript
spacing: {
  '18': '4.5rem',    // Custom spacing
  '88': '22rem',     // Large spacing
  '128': '32rem',    // XL spacing
}

borderRadius: {
  '4xl': '2rem',     // Soft rounded corners
}
```

### 4. Animation System

```typescript
animation: {
  'fade-in': 'fadeIn 0.3s ease-in-out',
  'slide-up': 'slideUp 0.4s ease-out', 
  'pulse-soft': 'pulseSoft 2s infinite',
}

// Usage in components
className={cn(
  "transition-all duration-300",
  isSearchFocused ? "scale-105" : ""
)}
```

### 5. Shadow System

```typescript
boxShadow: {
  'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07)...',
  'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1)...',
  'strong': '0 10px 40px -10px rgba(0, 0, 0, 0.15)...',
}
```

---

## üï∏Ô∏è F√ºgg≈ës√©gi T√©rk√©pek

### 1. Component Dependencies

```mermaid
graph TD
    A[page.tsx] --> B[Navigation.tsx]
    A --> C[Dashboard.tsx]
    A --> D[ChatWidget.tsx]
    A --> E[AdminPanel.tsx]
    
    C --> F[api.ts]
    D --> F
    E --> F
    
    F --> G[Backend API]
    
    A --> H[Providers.tsx]
    H --> I[React Context]
    
    style F fill:#e1f5fe
    style G fill:#f3e5f5
```

### 2. Data Flow Dependencies

```mermaid
sequenceDiagram
    participant U as User
    participant D as Dashboard
    participant C as ChatWidget
    participant A as API Service
    participant B as Backend
    
    U->>D: Load page
    D->>A: getProducts(), getManufacturers()
    A->>B: HTTP requests
    B-->>A: Data response
    A-->>D: Formatted data
    D-->>U: Display statistics
    
    U->>C: Ask question
    C->>A: searchRAG(query)
    A->>B: POST /search/rag
    B-->>A: Search results
    A-->>C: SearchResponse
    C-->>U: AI response + products
```

### 3. Build Dependencies

```yaml
Production Dependencies:
  next: "14.2.18"              # Framework
  react: "^18"                 # UI library
  react-dom: "^18"             # DOM rendering
  
Development Dependencies:
  typescript: "^5"             # Type system
  tailwindcss: "^3.4.1"       # Styling
  eslint: "^8"                 # Code quality
  @types/*: "^20|^18"          # Type definitions
```

---

## üöÄ Development Guide

### 1. Setup Instructions

```bash
# Navigate to frontend directory
cd src/frontend

# Install dependencies
npm install

# Start development server
npm run dev

# Open browser
# http://localhost:3000
```

### 2. Environment Configuration

```bash
# .env.local (optional)
NEXT_PUBLIC_API_URL=http://localhost:8000
```

### 3. Development Workflow

```yaml
Code Style:
  - TypeScript strict mode
  - ESLint compliance
  - Functional components only
  - Hooks-based state management

Component Creation:
  1. Create component file in appropriate directory
  2. Export default function component
  3. Add TypeScript interfaces for props
  4. Include JSDoc comments for complex logic
  5. Add to parent component imports

API Integration:
  1. Add new methods to ApiService class
  2. Define TypeScript interfaces for responses
  3. Implement error handling
  4. Add loading states in components
```

### 4. Testing Strategy

```yaml
Unit Testing:
  - Component rendering tests
  - User interaction tests
  - API service tests
  
Integration Testing:
  - Full user flows
  - API integration tests
  - Cross-component communication
  
E2E Testing:
  - Complete user journeys
  - Real backend integration
  - Performance validation
```

### 5. Build & Deployment

```bash
# Production build
npm run build

# Start production server
npm start

# Build analysis
npm run analyze
```

### 6. Performance Considerations

```yaml
Optimizations:
  - Next.js automatic code splitting
  - Image optimization (next/image)
  - Font optimization (next/font)
  - CSS tree shaking (Tailwind)
  
Monitoring:
  - Core Web Vitals
  - API response times
  - Component render performance
  - Bundle size analysis
```

---

## üìã Implementation Checklist

### ‚úÖ Completed Features
- [x] Modern responsive design system
- [x] Navigation with tab-based routing
- [x] Dashboard with real backend data
- [x] AI chat widget with RAG integration
- [x] TypeScript type safety
- [x] API service layer
- [x] Error handling and loading states
- [x] Accessibility features (ARIA labels)

### üîÑ In Progress
- [ ] Admin panel full functionality
- [ ] Search interface advanced filtering
- [ ] Product catalog detailed views

### üìã Future Enhancements
- [ ] React Query for better server state
- [ ] Internationalization (i18n)
- [ ] Advanced animation library (Framer Motion)
- [ ] Progressive Web App (PWA)
- [ ] Real-time notifications

---

## üìö References

- **Next.js Documentation**: https://nextjs.org/docs
- **Tailwind CSS**: https://tailwindcss.com/docs
- **TypeScript**: https://www.typescriptlang.org/docs
- **React**: https://react.dev
- **Design Inspiration**: Modern dashboard design trends 2025

---

*Dokument√°ci√≥ utols√≥ friss√≠t√©se: 2025-01-28*
*Verzi√≥: 1.0.0*
*St√°tusz: Production Ready* 